"use strict";var ltdc_megamenu=new Vue({el:"#js-megamenu--id",data:{isOpen:!1,aMegaNav:{children:[]},stick:!1,bL2:!1,bL3:!1,nl2l3:0,cat_l2l3:[],cat_lvl1:{},cat_lvl2:{},hasImage:!1,lazyLoaded:!1},watch:{hasImage:function(){this.hasImage&&!this.lazyLoaded&&(this.lazyLoaded=!0,[].slice.call(document.querySelectorAll("[data-ugc2-cat]")).filter(function(e){var t=e.firstElementChild;void 0!==t&&void 0!==t.dataset.lzSrc&&(t.src=t.dataset.lzSrc)}))}},methods:{open:function(){this.isOpen=!0,oTopmenu&&(this.$el.style.top=oTopmenu.getTopmenuLoc()),oTopmenu&&(this.stick=oTopmenu.isSticky())},close:function(){this.hover_l1("static"),this.isOpen=!1},setCat:function(e){this.oCat=e},hover_l1:function(e){this.mutexUgc2(e),"static"===e?(this.cat_lvl1={},this.bL2=!1):(this.cat_l2l3=this.getL2L3(e),this.nl2l3=this.calcBreakPoint(),this.cat_lvl1&&(this.bL2=!0)),this.bL3=!1,this.aMegaNav.children.filter(function(e){e.select=!1})},calcBreakPoint:function(){var e=this.aMegaNav.children.length,t=this.cat_l2l3.length,a=e-1;if(e<t)for(a=Math.floor(t/2)-1;a++,this.cat_l2l3[a]&&3===this.cat_l2l3[a].l;);return a},mutexUgc2:function(t){var a=!1,e=document.querySelectorAll(".ugc2__mutex");1<=e.length&&[].slice.call(e).filter(function(e){t===e.dataset.ugc2Cat?(e.classList.remove("ugc2__mutex--hide"),a=!0):e.classList.add("ugc2__mutex--hide")}),a?(document.getElementById("js-ugc2--id").classList.remove("mm-grid__ugc2--hide"),this.hasImage=!0):(document.getElementById("js-ugc2--id").classList.add("mm-grid__ugc2--hide"),this.hasImage=!1)},getL2L3:function(e){var a=[];return this.aMegaNav.children.filter(function(t){t.cat===e&&void 0!==t.children&&t.children.filter(function(e){a.push({cat:t.cat,name:e.name,href:e.href,l:2}),e.children&&e.children.filter(function(e){a.push({cat:e.cat,name:e.name,href:e.href,l:3})})})}),a},parseJSONCat:function(){var e={},t=0,a="",i="",n=-1;for(var c in jsnCat)switch(t=1,void 0!==jsnCat[c].level2CategoryUrl&&(t=2),void 0!==jsnCat[c].level3CategoryUrl&&(t=3),a=jsnCat[c]["level"+t+"DisplayName"],i=jsnCat[c]["level"+t+"CategoryUrl"],t){case 1:e={name:a,href:i,cat:c},this.aMegaNav.children.push(e),n=-1;break;case 2:void 0===e.children&&(e.children=[]),e.children.push({name:a,href:i,cat:c}),n++;break;case 3:void 0!==e.children[n]&&(void 0===e.children[n].children&&(e.children[n].children=[]),e.children[n].children.push({name:a,href:i,cat:c}))}}},created:function(e){this.parseJSONCat()}}),oMegamenu=function(e,t,i){var a=e.getElementById("js-topmenu__menu--id"),n=function(){a.classList.remove("megamenu"),i.close()};return a&&(a.addEventListener("click",function(e){oTopmenu&&oTopmenu.isMobile()?oTopmenu.autoToggle():i.isOpen?n():(a.classList.add("megamenu"),oTopsearch&&oTopsearch.close(),oFlymyaccount&&oFlymyaccount.close(),vTAtopmenu&&vTAtopmenu.close(),i.open())},!0),e.body.addEventListener("click",function(e){for(var t=e.target,a=!1;"HTML"!==t.tagName;){if("js-topmenu__menu--id"===t.id)return!1;if("LTDC-MEGAMENU"===t.tagName){a=!0;break}t=t.parentNode}!a&&i.isOpen&&n()},!0)),window.addEventListener("scroll",function(){n()}),{close:function(){n()}}}(document,0,ltdc_megamenu);