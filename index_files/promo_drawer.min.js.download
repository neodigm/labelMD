"use strict";var ltdc_promo_drawer=function(o,e){var n,t,a=o.getElementById(e[0]),r=o.getElementById(e[1]),d=o.getElementById(e[2]),i=o.getElementById(e[3]),l=o.getElementById(e[4]),c="ltd",s=[],m=0,u=!1,p=!0,f="dock";if(a&&r&&d&&i){n=a.firstElementChild,t=n.nextElementSibling;var _=function(){if(1022<=window.innerWidth&&window.innerWidth<=1368)return!0},g=function(){p=!p,a.classList.remove("l-promo_drawer--"+f+"ed"),r.style.transform="rotate(0deg)",oTopmenu&&oTopmenu.isMobile()&&!_()&&l.dataset.capCurrent&&(l.innerHTML=l.dataset.capCurrent)},w=function(){p=!p,a.classList.add("l-promo_drawer--"+f+"ed"),r.style.transform="rotate(180deg)",l.dataset.capDock&&(l.innerHTML=l.dataset.capDock),u=!1,k("input")},v=function(e){l.dataset.capCurrent=s[e].caption,p||(l.innerHTML=s[e].caption),s[e].prev?d.style.backgroundImage="url('/images/"+s[e].prev+"')":d.style.backgroundImage="url('')",s[e].next?i.style.backgroundImage="url('/images/"+s[e].next+"')":i.style.backgroundImage="url('')",oTopmenu&&oTopmenu.isMobile()&&!_()?(s.filter(function(e){e.el.classList.add("hide")}),s[e].el.classList.remove("hide")):s.filter(function(e){e.el.classList.remove("hide")})},k=function(e){e&&[].slice.call(t.querySelectorAll(e)).filter(function(e){"HIDDEN"!==e.type.toUpperCase()&&(e.value="")})};return r.style.transition="all 1.8s ease-out",r.style.transform="rotate(180deg)",{init:function(e){if(e){var t=localStorage.getItem("ltdc_promo_drawer");if(c=e.toLowerCase(),ltdc_promo_drawer.setDockMode(a.dataset.dock),a.classList.remove("hide"),n.addEventListener("click",function(e){ltdc_promo_drawer.toggle(),ltdc_promo_drawer.isDocked()||fireTealiumEvent({e_special_offers_drawer:"t"})}),d.addEventListener("click",function(e){fireTealiumEvent({e_headerpopup_email_p:"t"}),ltdc_promo_drawer.prev()}),i.addEventListener("click",function(e){fireTealiumEvent({e_popup_sms_p:"t"}),ltdc_promo_drawer.next()}),["click","touchstart"].forEach(function(e){window.addEventListener(e,function(e){var t=document.getElementsByClassName("reveal-modal-bg")[0];if(!(t&&"block"==t.style.display||"undefined"!=typeof ltdc_reveal&&ltdc_reveal.isOpen)){for(var r=e.target,o=!1;"HTML"!==r.tagName;){if("LTDC-PROMO_DRAWER"===r.tagName){u=o=!0;break}r=r.parentNode}o||p||w()}},!0)}),[].slice.call(o.querySelectorAll(".prmo-panel__cont")).filter(function(e){var t,r,o,n,a;o=e.dataset.prmdrwOrder,n=e.dataset.prmdrwToken,a=e.dataset.prmdrwCaption,t=c+"_promo_drawer_"+n+"_prev.png",r=c+"_promo_drawer_"+n+"_next.png","1"===o&&(t=null),s.push({order:o,token:n,caption:a,prev:t,next:r,el:e})}),s[s.length-1].next=null,n.style.left=document.body.clientWidth/2-n.clientWidth/2+"px",v(0),t)new Date(Number(t))<new Date&&(t=null,localStorage.removeItem("ltdc_promo_drawer"));if(!t){var r=new Date(Date.now()+2592e6);localStorage.setItem("ltdc_promo_drawer",r.getTime()),"dock"===f&&ltdc_promo_drawer.autoopen()}}},open:function(e,t){var r=function(t){if(t)return s.filter(function(e){if(t===e.token)return!0})[0].order}(e);if(r&&(m=--r,v(m)),p&&g(),t&&fireTealiumEvent){var o={};o[t]="t",fireTealiumEvent(o)}},toggle:function(){p?g():w()},enchant:function(){p&&6<Math.floor(9*Math.random()+1)&&(r.style.transform="rotate(0deg)",r.style.fill="#00ff00",setTimeout(function(){p&&(r.style.transform="rotate(180deg)"),r.style.fill="#fff"},2600))},prev:function(){0<m&&v(--m)},next:function(){m<s.length-1&&v(++m)},autoopen:function(){setTimeout(function(){ltdc_promo_drawer.isDocked()||ltdc_promo_drawer.isEngaged()||ltdc_promo_drawer.toggle()},9e3),setTimeout(function(){ltdc_promo_drawer.open()},2e3)},setDockMode:function(e){"true"===e?(f="dock",a.classList.remove("l-promo_drawer--nodocked")):(f="nodock",a.classList.remove("l-promo_drawer--docked")),a.classList.add("l-promo_drawer--"+f+"ed")},reset:function(){localStorage.removeItem("ltdc_promo_drawer")},test_date:function(e){if(e){var t=new Date(Date.now()+24*e*60*60*1e3);localStorage.setItem("ltdc_promo_drawer",t.getTime()),console.table([{date:Date(),Source:"Now"},{date:t,Source:"Calculated"}])}},isDocked:function(){return p},isEngaged:function(){return u},isTabletLandscape:function(){return _()}}}}(document,["js-promo_drawer--id","js-prmo-drwr__vect--id","js-prmo-tab__prev--id","js-prmo-tab__next--id","js-prmo-drwr__caption--id"]);ltdc_promo_drawer&&ltdc_promo_drawer.init(document.body.dataset.brand);