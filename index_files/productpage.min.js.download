"use strict";for(var classname=document.getElementsByClassName("js-prod-href__a"),i=0;i<classname.length;i++)classname[i].addEventListener("click",PrevNextFunction,!1);function PrevNextFunction(){var e=this.getAttribute("href"),t=e.split("?")[1].split("&"),n=window.location.search.substring(1).split("&"),r=window.location.href.split("?")[0];sessionStorage.clear(),-1!=r.indexOf("N-")&&(-1!=(r=r.substring(r.indexOf("N-")+2)).indexOf(";")&&(r=r.substring(0,r.indexOf(";"))),r=r.replace(/[^a-zA-Z0-9]/g,""),sessionStorage.setItem("N",r)),0<t.length&&t.forEach(function(e){var t=e.split("=");"search"!=t[1]&&sessionStorage.setItem(t[0],t[1])}),0<n.length&&n.forEach(function(e){var t=e.split("=");"search"!=t[1]&&sessionStorage.setItem(t[0],t[1])}),document.getElementById("recordFilterState")&&sessionStorage.setItem("Nr",document.getElementById("recordFilterState").value),window.location=e}for(var __th_atcForms=document.querySelectorAll(".js__pc--addToCart"),ln=(i=0,__th_atcForms.length);i<ln;i++)__th_atcForms[i].addEventListener("click",function(){var e=this.dataset.formId,t=this.dataset.tealiumEnabled,n=this.dataset.srcId;__submit_th_cart(e,this.dataset.prodId,this.dataset.skuId,n,t,this.dataset.actionId)});function __submit_th_cart(n,r,a,o,s,i){var d=new XMLHttpRequest,e=document.getElementById(n);return d.onload=function(){var e=JSON.parse(d.responseText);if(e.success){if(updateCartContents(),showFlyoutCart(e),s){var t=e.pinCodes[0];tag_th_ATC(n,r,a,t,o,i)}}else ltdc_snackbar.q(e.error,"error")},d.onerror=function(){},d.open(e.method,e.action,!0),d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.send(new FormData(e)),!1}function tag_th_ATC(e,t,n,r,a,o){if("wishlist"!=o)var s=1*(d=document.querySelectorAll("."+a+" .prod-artc")[e.split("_")[1]-1].getElementsByClassName("prod-price")[0].innerHTML.replace("$","")),i=determineSource();else{s=1*a;var d=a;i=o}fireTealiumAjaxEvent({pagename:"cart-add",pagetype:"cart-add",action:o,productId:t,skuId:n,quantity:"1",totalPrice:s,unitPrice:d,pin:r,source:i})}var preAddToGift=function(){if(vltdc_productdetail.jResponse.childSkus[0].value.isPersonalized){var e=new XMLHttpRequest;e.onload=function(){JSON.parse(e.responseText)?(vltdc_productdetail.submitGiftError(),ltdc_snackbar.q("We're sorry, but profanity cannot be applied to personalized items","error")):(document.getElementById("addToGiftPersonalInput").value=vltdc_productdetail.getPersInputArray()[1],document.getElementById("addToGiftPersonalHeader").value=vltdc_productdetail.getPersInputArray()[0],addToGift())},e.open("GET","/common/profanity_check.jsp?profanityStringToCheck="+vltdc_productdetail.getPersInputArray()[1]),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.send()}else addToGift()},addToGift=function(){var t=new XMLHttpRequest,e=document.getElementById("addToGiftPDP");return t.onload=function(){console.log(t.responseText);var e=JSON.parse(t.responseText);e.success?(updateGiftContents("pdp"),showFlyoutGift(e),"true"==document.getElementsByClassName("xxxtealiumEnabled")[0].value&&tagPDPGiftAdd()):(vltdc_productdetail.submitGiftError(),ltdc_snackbar.q(e.error,"error"))},t.onerror=function(){console.log(t.responseText)},t.open(e.method,e.action,!0),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(new FormData(e)),!1},preAddToCart=function(){if(vltdc_productdetail.jResponse.childSkus[0].value.isPersonalized){var e=new XMLHttpRequest;e.onload=function(){JSON.parse(e.responseText)?(vltdc_productdetail.submitCartError(),ltdc_snackbar.q("We're sorry, but profanity cannot be applied to personalized items","error")):(document.getElementById("addToCartPersonalInput").value=vltdc_productdetail.getPersInputArray()[1],document.getElementById("addToCartPersonalHeader").value=vltdc_productdetail.getPersInputArray()[0],addToCart())},e.open("GET","/common/profanity_check.jsp?profanityStringToCheck="+vltdc_productdetail.getPersInputArray()[1]),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.send()}else addToCart()},addToCart=function(){var t=new XMLHttpRequest,e=document.getElementById("addToCartPDP");return t.onload=function(){console.log(t.responseText);var e=JSON.parse(t.responseText);e.success?(updateCartContents("pdp"),showFlyoutCart(e),"true"==document.getElementsByClassName("xxxtealiumEnabled")[0].value&&tagPDPCartAdd()):(vltdc_productdetail.submitCartError(),ltdc_snackbar.q(e.error,"error"))},t.onerror=function(){},t.open(e.method,e.action,!0),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(new FormData(e)),!1};function tagPDPCartAdd(){var e=document.getElementsByClassName("sku-desc__price")[0].innerHTML.replace("$",""),t=document.getElementsByClassName("xxxprodid")[0].value,n=document.getElementsByClassName("xxxpin")[0].value,r=document.getElementById("quantity").value,a=document.getElementsByName("skuNumFld")[0].value,o=e*r,s=determineSource(),i=determineAction();fireTealiumAjaxEvent({pagename:"cart-add",pagetype:"cart-add",action:i,productId:t,skuId:a,quantity:r,totalPrice:o,unitPrice:e,pin:n,source:s})}function tagPDPGiftAdd(){var e=document.getElementsByClassName("sku-desc__price")[0].innerHTML.replace("$",""),t=document.getElementsByClassName("xxxprodid")[0].value,n=(document.getElementsByClassName("xxxpin")[0].value,document.getElementsByName("skuNumFld")[0].value),r="1"*e,a=determineSource();determineAction();fireTealiumAjaxEvent({pagename:"wishlist-add",pagetype:"wishlist-add",action:"pdp",productId:t,skuId:n,unitPrice:e,totalPrice:r,source:a})}function updateCartContents(t){var n=document.getElementsByClassName("topmenu__link--items")[0],r=new XMLHttpRequest;r.onreadystatechange=function(e){4==r.readyState&&200==r.status&&(n.innerHTML=r.responseText,"pdp"==t&&(vltdc_productdetail.aCartMsg[2]=r.responseText,vltdc_productdetail.submitCartComplete()))},r.open("GET","/checkout/flyout_cart.jsp?getCartCount=true",!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.send()}function updateGiftContents(t){var n=document.getElementsByClassName("topmenu__link--wish")[0],r=new XMLHttpRequest;r.onreadystatechange=function(e){4==r.readyState&&200==r.status&&(n.innerHTML=r.responseText,"pdp"==t&&vltdc_productdetail.submitGiftComplete())},r.open("GET","/checkout/flyout_gift.jsp?getGiftCount=true",!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.send()}function determineSource(){return-1<window.location.href.indexOf("fm=search")?"search":1<window.location.href.indexOf("pinSearch")?"pinsearch":-1<window.location.href.indexOf("fm=brhist")?"browsing_history":-1<window.location.href.indexOf("fm=upsell")?"upsell":-1<window.location.href.indexOf("catalog_quick")?"catalog_quick_order":-1<window.location.href.indexOf("fm=qvdetails")?"qvdetails":-1<window.location.href.indexOf("my_favorites")?"my_favorites":-1<window.location.href.indexOf("bookId=")?"catalog":-1<window.location.href.indexOf("cid=tell-a-friend")?"tell-a-friend":"browse"}function determineAction(){return-1<window.location.href.indexOf("rrec")?"prod_rec_pdp":"pdp"}var brHistProd=document.querySelectorAll(".brHistory .productcard__a");for(i=0,ln=brHistProd.length;i<ln;i++)brHistProd[i].addEventListener("click",function(){fireTealiumEvent({e_browse_history:"t"})});window.addEventListener("load",function(e){window.location.search.substring(1).split("&").forEach(function(e){var t=e.split("=");if("writeReview"==t[0]&&"t"==t[1])"function"==typeof submitReview&&submitReview();else if("showReviews"==t[0]&&"t"==t[1]){var n=document.getElementById("reviews");"opened"!=document.getElementById("reviewSummary").dataset.state?n.click():n.scrollIntoView(),fireTealiumEvent({e_customer_reviews:"t"})}})});