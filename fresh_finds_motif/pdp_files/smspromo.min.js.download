"use strict";for(var fSMSSignUpOnClickDroplet=function(e){var t=e.target.parentNode.getElementsByClassName("js-sms__input")[0],n=e.target.parentNode.getElementsByClassName("js-siteId__input")[0].value,s=e.target.parentNode.getElementsByClassName("js-smsUrl__input")[0].value,a=e.target.parentNode.getElementsByClassName("js-location__input")[0].value,r=e.target.parentNode.getElementsByClassName("js-error__input")[0].value,i=e.target.parentNode.getElementsByClassName("js-sms__button")[0],l="",o="",d={};d["e_"+a+"_sms_success"]="t";var u={};if(u["e_"+a+"_sms_existing"]="t",t)if(isPhoneValid(t.value)){fSpinner(i,document.body.dataset.brand,!0);var m={mobileNumber:t.value.replace(/\W/g,""),site:n};axios.get(s,{params:m},{timeout:1e3}).then(function(e){switch(fSpinner(i,document.body.dataset.brand,!1),l=e.data,o=l.smsStatus){case"202":case"active":ltdc_snackbar.q(l.messageContent);for(var t=document.querySelectorAll(".js-sms__input"),n=0;n<t.length;n++)t[n].value="";ltdc_promo_drawer.isDocked()||ltdc_promo_drawer.toggle();break;default:ltdc_snackbar.q(l.messageContent,"error")}switch(fireTealiumEvent({e_header_sms:"t"}),o){case"202":fireTealiumEvent(d);break;case"active":fireTealiumEvent(u)}}).catch(function(e){ltdc_snackbar.q(r,"error")})}else fButtonPassiveValidationErrorPhone(i,"Phone","Text Me");return!0},fButtonPassiveValidationErrorPhone=function(e,t,n){if(e){var s=e,a=e.style;"true"!==e.dataset.hasError&&(e.dataset.hasError="true",e.style.backgroundColor="#d0021b",e.style.color="#fff",e.innerHTML="Invalid<br>"+t,e.style.lineHeight="1.2",e.style.width="66px",e.style.minWidth="66px",setTimeout(function(){s.innerHTML=n,s.style=a,s.dataset.hasError="false"},2800))}},fSpinner=function(e,t,n){if(e&&t)if(n){(s=new Image).src="/images/"+t.toLowerCase()+"_spinner_small.gif",s.id="js-spin__img--id",e.dataset.spinText=e.innerHTML,e.innerHTML="",e.appendChild(s)}else{var s=document.getElementById("js-spin__img--id");e.removeChild(s),e.dataset&&(e.innerHTML=e.dataset.spinText)}},signSMSUpBtns=document.querySelectorAll(".js-sms__button"),i=0,length=signSMSUpBtns.length;i<length;i++)signSMSUpBtns[i].addEventListener("click",function(e){var t=e.target.parentNode.getElementsByClassName("js-sms__button")[0];t&&-1===t.innerHTML.indexOf("Invalid")&&fSMSSignUpOnClickDroplet(e)});for(var smsInputs=document.querySelectorAll(".js-sms__input"),j=0;j<smsInputs.length;j++)smsInputs[j].addEventListener("input",function(e){var t=e.target.value.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/);e.target.value=t[2]?"("+t[1]+") "+t[2]+(t[3]?"-"+t[3]:""):t[1]}),smsInputs[j].addEventListener("mouseover",function(){this.placeholder="(___)___-____"}),smsInputs[j].addEventListener("mouseout",function(){this.placeholder="Mobile Phone"}),smsInputs[j].addEventListener("keydown",function(e){if(13==e.keyCode){var t=e.target.parentNode.getElementsByClassName("js-sms__button")[0];if(t&&-1===t.innerHTML.indexOf("Invalid"))return fSMSSignUpOnClickDroplet(e),!1}});function isPhoneValid(e){return""!=e&&10===e.match(/\d/g).length}