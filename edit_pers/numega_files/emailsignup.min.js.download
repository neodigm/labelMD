"use strict";function isEmailValid(e){var t=!1;return e&&-1!==e.indexOf("@")&&-1!==e.indexOf(".")&&(t=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/.test(e)),t}function fireTealiumEv(e,t){if(e&&t){var a={};a["e_"+e+"_email_"+t]="t",fireTealiumEvent(a)}}for(var fButtonPassiveValidationError=function(e,t,a){if(e){var n=e,i=e.style;"true"!==e.dataset.hasError&&(e.dataset.hasError="true",e.style.backgroundColor="#d0021b",e.style.color="#fff",e.innerHTML="Invalid<br>"+t,e.style.lineHeight="1.2",e.style.width="66px",e.style.minWidth="66px",setTimeout(function(){n.innerHTML=a,n.style=i,n.dataset.hasError="false"},2800))}},fEmailSignUpOnClick=function(e){if(e){var t=e.target.parentNode.getElementsByClassName("js-eml__input--field")[0];if(t)if(isEmailValid(t.value)){fireTealiumEvent({e_header_email:"t"}),e.target.parentNode.getElementsByClassName("js-email__addr")[0].setAttribute("value",t.value);var a=new XMLHttpRequest,n=e.target.parentNode.getElementsByTagName("form")[0],i=n.dataset.location;a.onload=function(){var e=a.responseText;1==JSON.parse(e).newEmailSignUp?(ltdc_snackbar&&ltdc_snackbar.q("Thank you for signing up for Emails"),fireTealiumEv(i,"success")):(ltdc_snackbar&&ltdc_snackbar.q("Thank you|We already have you on our List."),fireTealiumEv(i,"existing")),t.value="",ltdc_reveal.isOpen&&ltdc_reveal.close()},a.onerror=function(){},a.open(n.method,n.action,!0),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.send(new FormData(n))}else{var r=e.target.parentNode.getElementsByClassName("js-eml__submit--button")[0];fButtonPassiveValidationError(r,"Email","Sign Up")}}return!1},signUpBtns=document.querySelectorAll(".js-eml__submit--button"),i=0;i<signUpBtns.length;i++)signUpBtns[i].addEventListener("click",function(e){fEmailSignUpOnClick(e)});for(var addrInputFields=document.querySelectorAll(".js-eml__input--field"),j=0;j<addrInputFields.length;j++)addrInputFields[j].addEventListener("keydown",function(e){if(13==e.keyCode)return fEmailSignUpOnClick(e),!1});